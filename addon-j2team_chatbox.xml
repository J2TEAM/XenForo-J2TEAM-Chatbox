<?xml version="1.0" encoding="utf-8"?>
<addon addon_id="j2team_chatbox" title="J2TeaM Chatbox" version_string="1.0.0" version_id="0" url="https://junookyo.blogspot.com/" install_callback_class="" install_callback_method="" uninstall_callback_class="" uninstall_callback_method="">
  <admin_navigation/>
  <admin_permissions/>
  <admin_style_properties/>
  <admin_templates/>
  <admin_template_modifications/>
  <code_events/>
  <code_event_listeners>
    <listener event_id="template_hook" execute_order="10" callback_class="J2TeaM_chatbox_index" callback_method="templateHook" active="1" hint="" description=""/>
  </code_event_listeners>
  <cron/>
  <email_templates/>
  <email_template_modifications/>
  <optiongroups>
    <group group_id="1" display_order="1" debug_only="0"/>
    <option option_id="j2team_chatbox_enable" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>true</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="1" display_order="0"/>
    </option>
    <option option_id="j2team_chatbox_firebase_url" edit_format="textbox" data_type="string" can_backup="1">
      <default_value>https://&lt;YOUR_ID&gt;.firebaseio.com/</default_value>
      <edit_format_params>type=url</edit_format_params>
      <sub_options></sub_options>
      <relation group_id="1" display_order="2"/>
    </option>
    <option option_id="j2team_chatbox_height" edit_format="textbox" data_type="integer" can_backup="1">
      <default_value>400</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="1" display_order="4"/>
    </option>
    <option option_id="j2team_chatbox_max_messages" edit_format="select" data_type="integer" can_backup="1">
      <default_value>50</default_value>
      <edit_format_params>50=50
70=70
100=100</edit_format_params>
      <sub_options></sub_options>
      <relation group_id="1" display_order="3"/>
    </option>
    <option option_id="j2team_chatbox_title" edit_format="textbox" data_type="string" can_backup="1">
      <default_value>Chatbox</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="1" display_order="1"/>
    </option>
  </optiongroups>
  <permissions>
    <permission_groups/>
    <permissions/>
    <interface_groups/>
  </permissions>
  <phrases>
    <phrase title="option_group_1" version_id="0" version_string="1.0.0"><![CDATA[J2TeaM Chatbox]]></phrase>
    <phrase title="option_group_1_description" version_id="0" version_string="1.0.0"><![CDATA[]]></phrase>
    <phrase title="option_j2team_chatbox_enable" version_id="0" version_string="1.0.0"><![CDATA[Enable Chatbox]]></phrase>
    <phrase title="option_j2team_chatbox_enable_explain" version_id="0" version_string="1.0.0"><![CDATA[Turn it on/off]]></phrase>
    <phrase title="option_j2team_chatbox_firebase_url" version_id="0" version_string="1.0.0"><![CDATA[Firebase URL]]></phrase>
    <phrase title="option_j2team_chatbox_firebase_url_explain" version_id="0" version_string="1.0.0"><![CDATA[Get a free account <a href="https://www.firebase.com/signup/" target="_blank">here</a> if you don't have yet!]]></phrase>
    <phrase title="option_j2team_chatbox_height" version_id="0" version_string="1.0.0"><![CDATA[Chatbox Height (unit: px)]]></phrase>
    <phrase title="option_j2team_chatbox_height_explain" version_id="0" version_string="1.0.0"><![CDATA[]]></phrase>
    <phrase title="option_j2team_chatbox_max_messages" version_id="0" version_string="1.0.0"><![CDATA[Max Messages]]></phrase>
    <phrase title="option_j2team_chatbox_max_messages_explain" version_id="0" version_string="1.0.0"><![CDATA[The number of messages to display on your chatbox]]></phrase>
    <phrase title="option_j2team_chatbox_title" version_id="0" version_string="1.0.0"><![CDATA[Chatbox Title]]></phrase>
    <phrase title="option_j2team_chatbox_title_explain" version_id="0" version_string="1.0.0"><![CDATA[]]></phrase>
  </phrases>
  <route_prefixes/>
  <style_properties/>
  <templates>
    <template title="j2team_chat.css" version_id="0" version_string="1.0.0"><![CDATA[/* xbbcode.css */
.xbbcode-b{font-weight:bold}.xbbcode-blockquote{}.xbbcode-center{margin-left:auto;margin-right:auto;display:block;text-align:center}.xbbcode-code{white-space:pre-wrap;font-family:monospace}.xbbcode-i{font-style:italic}.xbbcode-justify{display:block;text-align:justify}.xbbcode-left{display:block;text-align:left}.xbbcode-right{display:block;text-align:right}.xbbcode-s{text-decoration:line-through}.xbbcode-size-4{font-size:4px}.xbbcode-size-5{font-size:5px}.xbbcode-size-6{font-size:6px}.xbbcode-size-7{font-size:7px}.xbbcode-size-8{font-size:8px}.xbbcode-size-9{font-size:9px}.xbbcode-size-10{font-size:10px}.xbbcode-size-11{font-size:11px}.xbbcode-size-12{font-size:12px}.xbbcode-size-13{font-size:13px}.xbbcode-size-14{font-size:14px}.xbbcode-size-15{font-size:15px}.xbbcode-size-16{font-size:16px}.xbbcode-size-17{font-size:17px}.xbbcode-size-18{font-size:18px}.xbbcode-size-19{font-size:19px}.xbbcode-size-20{font-size:20px}.xbbcode-size-21{font-size:21px}.xbbcode-size-22{font-size:22px}.xbbcode-size-23{font-size:23px}.xbbcode-size-24{font-size:24px}.xbbcode-size-25{font-size:25px}.xbbcode-size-26{font-size:26px}.xbbcode-size-27{font-size:27px}.xbbcode-size-28{font-size:28px}.xbbcode-size-29{font-size:29px}.xbbcode-size-30{font-size:30px}.xbbcode-size-31{font-size:31px}.xbbcode-size-32{font-size:32px}.xbbcode-size-33{font-size:33px}.xbbcode-size-34{font-size:34px}.xbbcode-size-35{font-size:35px}.xbbcode-size-36{font-size:36px}.xbbcode-size-37{font-size:37px}.xbbcode-size-38{font-size:38px}.xbbcode-size-39{font-size:39px}.xbbcode-size-40{font-size:40px}.xbbcode-u{text-decoration:underline}.xbbcode-table{border-collapse:collapse}.xbbcode-tr{}.xbbcode-table,.xbbcode-th,.xbbcode-td{border:1px solid #666}

/* jquery.cssemoticons.css */
span.css-emoticon{font-family:"Trebuchet MS";font-size:0.65em;font-weight:bold;color:#000000;display:inline-block;overflow:hidden;vertical-align:middle;transform:rotate(90deg);-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);width:1.54em;height:1.54em;text-align:center;padding:0;line-height:1.34em;-moz-border-radius:1.54em;-webkit-border-radius:1.54em;border-radius:1.54em;-moz-box-shadow:1px -1px 2px rgba(0,0,0,0.5);-webkit-box-shadow:1px -1px 2px rgba(0,0,0,0.5);box-shadow:1px -1px 2px rgba(0,0,0,0.5);border:1px solid rgba(0,0,0,0.25);background-color:#ffcc00;background-image:-webkit-gradient(linear,right top,left top,color-stop(0.41,rgb(255,204,0)),color-stop(0.56,rgb(255,221,85)),color-stop(1,rgb(255,238,170)));background-image:-moz-linear-gradient(center right,rgb(255,204,0) 41%,rgb(255,221,85) 56%,rgb(255,238,170) 100%);-webkit-transition-property:color,background,transform;-webkit-transition-duration:1s,1s;-webkit-transition-timing-function:linear,ease-in}span.css-emoticon.spaced-emoticon{padding-left:0.2em;width:1.34em;letter-spacing:0.2em}@media screen and (-webkit-min-device-pixel-ratio:0){span.css-emoticon.spaced-emoticon{width:1.4em}}span.css-emoticon.small-emoticon{font-size:0.55em;width:1.82em;height:1.82em;line-height:1.72em;-moz-border-radius:1.82em;-webkit-border-radius:1.82em;border-radius:1.82em}span.css-emoticon.small-emoticon.spaced-emoticon{padding-left:0;width:1.82em;letter-spacing:0.1em}span.css-emoticon.red-emoticon{background-color:#eb0542;background-image:-webkit-gradient(linear,right top,left top,color-stop(0.41,rgb(235,5,66)),color-stop(0.56,rgb(235,38,90)),color-stop(1,rgb(250,55,110)));background-image:-moz-linear-gradient(center right,rgb(235,5,66) 41%,rgb(235,38,90) 56%,rgb(250,55,110) 100%)}span.css-emoticon.pink-emoticon{background-color:#ff8fd4;background-image:-webkit-gradient(linear,right top,left top,color-stop(0.41,rgb(255,143,212)),color-stop(0.56,rgb(255,153,216)),color-stop(1,rgb(255,173,225)));background-image:-moz-linear-gradient(center right,rgb(255,143,212) 41%,rgb(255,153,216) 56%,rgb(255,173,225) 100%)}span.css-emoticon.no-rotate{transform:rotate(0deg);-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);-moz-box-shadow:1px 1px 2px rgba(0,0,0,0.5);-webkit-box-shadow:1px 1px 2px rgba(0,0,0,0.5);box-shadow:1px 1px 2px rgba(0,0,0,0.5);font-size:0.45em;width:2.2em;height:2.2em;line-height:1.9em;-moz-border-radius:2.2em;-webkit-border-radius:2.2em;border-radius:2.2em;background-image:-webkit-gradient(linear,right bottom,right top,color-stop(0.41,rgb(255,204,0)),color-stop(0.56,rgb(255,221,85)),color-stop(1,rgb(255,238,170)));background-image:-moz-linear-gradient(center bottom,rgb(255,204,0) 41%,rgb(255,221,85) 56%,rgb(255,238,170) 100%)}span.css-emoticon.no-rotate.red-emoticon{background-image:-webkit-gradient(linear,right bottom,right top,color-stop(0.41,rgb(235,5,66)),color-stop(0.56,rgb(235,38,90)),color-stop(1,rgb(250,55,110)));background-image:-moz-linear-gradient(center bottom,rgb(235,5,66) 41%,rgb(235,38,90) 56%,rgb(250,55,110) 100%)}span.css-emoticon.no-rotate.pink-emoticon{background-image:-webkit-gradient(linear,right bottom,right top,color-stop(0.41,rgb(255,143,212)),color-stop(0.56,rgb(255,153,216)),color-stop(1,rgb(255,173,225)));background-image:-moz-linear-gradient(center bottom,rgb(255,143,212) 41%,rgb(255,153,216) 56%,rgb(255,173,225) 100%)}span.css-emoticon.counter-rotated{transform:rotate(-90deg);-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-o-transform:rotate(-90deg);-moz-box-shadow:-1px 1px 2px rgba(0,0,0,0.5);-webkit-box-shadow:-1px 1px 2px rgba(0,0,0,0.5);box-shadow:-1px 1px 2px rgba(0,0,0,0.5);background-image:-webkit-gradient(linear,left top,right top,color-stop(0.41,rgb(255,204,0)),color-stop(0.56,rgb(255,221,85)),color-stop(1,rgb(255,238,170)));background-image:-moz-linear-gradient(center left,rgb(255,204,0) 41%,rgb(255,221,85) 56%,rgb(255,238,170) 100%)}span.css-emoticon.counter-rotated.red-emoticon{background-image:-webkit-gradient(linear,left top,right top,color-stop(0.41,rgb(235,5,66)),color-stop(0.56,rgb(235,38,90)),color-stop(1,rgb(250,55,110)));background-image:-moz-linear-gradient(center left,rgb(235,5,66) 41%,rgb(235,38,90) 56%,rgb(250,55,110) 100%)}span.css-emoticon.counter-rotated.pink-emoticon{background-image:-webkit-gradient(linear,left top,right top,color-stop(0.41,rgb(255,143,212)),color-stop(0.56,rgb(255,153,216)),color-stop(1,rgb(255,173,225)));background-image:-moz-linear-gradient(center left,rgb(255,143,212) 41%,rgb(255,153,216) 56%,rgb(255,173,225) 100%)}span.css-emoticon.un-transformed-emoticon,span.css-emoticon.animated-emoticon:hover{letter-spacing:inherit;color:inherit;overflow:visible;transform:rotate(0deg);-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);background:none;background-image:none;box-shadow:none;-moz-box-shadow:none;-webkit-box-shadow:none;border-color:transparent}span.css-emoticon.nintendo-controller{font-size:.8em;height:1.2em;line-height:1em;width:2.7em;vertical-align:bottom;border-radius:0;-webkit-border-radius:0;-moz-border-radius:0;background:-webkit-gradient(linear,left bottom,left top,color-stop(0.09,rgb(116,121,140)),color-stop(0.55,rgb(165,170,189)));background:-moz-linear-gradient(center bottom,rgb(116,121,140) 9%,rgb(165,170,189) 55%)}

/* J2TeaM_chat.css */
li,ol,ul{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}ol,ul{list-style:none}#j2team_chatbox_input{margin-top:5px;padding:2px;width:98%}#j2team_chatbox_wrapper{padding:0}#j2team_chatbox_wrapper div{margin:0 0 5px}#j2team_chatbox_wrapper .framesb{width:99%;border:0;padding:0;margin-left:5px;height:400px;background-color:#000}#j2team_chatbox_wrapper form input{margin-left:5px}#j2team_chatbox_wrapper button[type="submit"]{margin-left:5px}#j2team_chatbox_frame{background:#8E0E00;background:-webkit-linear-gradient(to left,#8E0E00,#1F1C18);background:linear-gradient(to left,#8E0E00,#1F1C18);font-family:Roboto,sans-serif;font-size:16px;color:khaki;overflow-y:auto}#j2team_chatbox_frame a:link,body_alink{color:#F63;text-decoration:none;font-weight:700}#j2team_chatbox_frame a:visited,body_avisited{color:#F63;text-decoration:none}#j2team_chatbox_frame a:active,a:hover,body_ahover{color:#F0D973;text-decoration:none}#j2team_chatbox_frame .smallfont{font:9px verdana,geneva,lucida,'lucida grande',arial,helvetica,sans-serif}#j2team_chatbox_frame .time{color:#666686}#j2team_chatbox_frame .alt{background:#fff;font:10pt verdana,geneva,lucida,'lucida grande',arial,helvetica,sans-serif}#j2team_chatbox_frame .tborder{background:#d1d1e1;color:#000;border:1px solid #0b198c}#j2team_chatbox_frame .alt1,.alt1Active{background:#f5f5ff;color:#000}#j2team_chatbox_frame .alt2,.alt2Active{background:#e1e4f2;color:#000}#j2team_chatbox_frame .tech{text-shadow:0 0 .5em #0ca500,0 0 .5em #0ca500,0 0 .5em #0ca500}#j2team_chatbox_frame::-webkit-scrollbar{width:12px;height:12px}#j2team_chatbox_frame::-webkit-scrollbar-track{background-color:#f5f5f5;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);border:0 solid #000}#j2team_chatbox_frame::-webkit-scrollbar-thumb{background:#3b5998}#j2team_chatbox_frame::-webkit-scrollbar-thumb:hover{background:#476ebf}#j2team_chatbox_frame::-webkit-scrollbar-thumb:active{background:#888;-webkit-box-shadow:inset 1px 1px 2px rgba(0,0,0,.3)}#j2team_chatbox_frame li{margin:5px 10px}#j2team_chatbox_frame ul{word-break:break-all;text-shadow:1px 1px 6px rgba(0,0,0,.8)}#j2team_chatbox_frame img{max-width:250px}
]]></template>
    <template title="j2team_chat.js" version_id="0" version_string="1.0.0"><![CDATA[/* xbbcode.js */
"use strict";var XBBCODE=function(){function e(){s=[];var e,t,n;for(e in i)if(i.hasOwnProperty(e)){for("*"===e?s.push("\\"+e):(s.push(e),i[e].noParse&&y.push(e)),i[e].validChildLookup={},i[e].validParentLookup={},i[e].restrictParentsTo=i[e].restrictParentsTo||[],i[e].restrictChildrenTo=i[e].restrictChildrenTo||[],n=i[e].restrictChildrenTo.length,t=0;n>t;t++)i[e].validChildLookup[i[e].restrictChildrenTo[t]]=!0;for(n=i[e].restrictParentsTo.length,t=0;n>t;t++)i[e].validParentLookup[i[e].restrictParentsTo[t]]=!0}c=new RegExp("<bbcl=([0-9]+) ("+s.join("|")+")([ =][^>]*?)?>((?:.|[\\r\\n])*?)<bbcl=\\1 /\\2>","gi"),u=new RegExp("\\[("+s.join("|")+")([ =][^\\]]*?)?\\]([^\\[]*?)\\[/\\1\\]","gi"),g=new RegExp("\\[("+y.join("|")+")([ =][^\\]]*?)?\\]([\\s\\S]*?)\\[/\\1\\]","gi"),function(){for(var e=[],t=0;t<s.length;t++)"\\*"!==s[t]&&e.push("/"+s[t]);p=new RegExp("(\\[)((?:"+s.join("|")+")(?:[ =][^\\]]*?)?)(\\])","gi"),d=new RegExp("(\\[)("+e.join("|")+")(\\])","gi")}()}function t(e,n,r,o,a,l,u){u=u||[],r++;var g,p,d,f,b=new RegExp("(<bbcl="+r+" )("+s.join("|")+")([ =>])","gi"),h=new RegExp("(<bbcl="+r+" )("+s.join("|")+")([ =>])","i"),T=l.match(b)||[],x=i[e]||{};for(b.lastIndex=0,T||(l=""),d=0;d<T.length;d++)h.lastIndex=0,f=T[d].match(h)[2].toLowerCase(),x&&x.restrictChildrenTo&&x.restrictChildrenTo.length>0&&(x.validChildLookup[f]||(p='The tag "'+f+'" is not allowed as a child of the tag "'+e+'".',u.push(p))),g=i[f]||{},g.restrictParentsTo.length>0&&(g.validParentLookup[e]||(p='The tag "'+e+'" is not allowed as a parent of the tag "'+f+'".',u.push(p)));return l=l.replace(c,function(e,n,r,o,a){return u=t(r.toLowerCase(),e,n,r,o,a,u),e}),u}function n(e){return e=e.replace(/\<([^\>][^\>]*?)\>/gi,function(e,t){var n=t.match(/^bbcl=([0-9]+) /);return null===n?"<bbcl=0 "+t+">":"<"+t.replace(/^(bbcl=)([0-9]+)/,function(e,t,n){return t+(parseInt(n,10)+1)})+">"})}function r(e){return e.replace(/<bbcl=[0-9]+ \/\*>/gi,"").replace(/<bbcl=[0-9]+ /gi,"&#91;").replace(/>/gi,"&#93;")}function o(e){var t=e.text;return t=t.replace(c,k)}function a(e){for(e=e.replace(/\[(?!\*[ =\]]|list([ =][^\]]*)?\]|\/list[\]])/gi,"<"),e=e.replace(/\[(?=list([ =][^\]]*)?\]|\/list[\]])/gi,">");e!==(e=e.replace(/>list([ =][^\]]*)?\]([^>]*?)(>\/list])/gi,function(e){for(var t=e;t!==(t=t.replace(/\[\*\]([^\[]*?)(\[\*\]|>\/list])/i,function(e,t,n){return n=">/list]"===n.toLowerCase()?"</*]</list]":"</*][*]","<*]"+t+n})););return t=t.replace(/>/g,"<")})););return e=e.replace(/</g,"[")}function l(e){for(;e!==(e=e.replace(u,function(e){return e=e.replace(/\[/g,"<"),e=e.replace(/\]/g,">"),n(e)})););return e}var i,s,c,u,g,p,d,f={},b=/^(?:https?|file|c):(?:\/{1,3}|\\{1})[-a-zA-Z0-9:;@#%&()~_?\+=\/\\\.]*$/,h=/^(?:aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen)$/,T=/^#?[a-fA-F0-9]{6}$/,x=/[^\s@]+@[^\s@]+\.[^\s@]+/,m=/^([a-z][a-z0-9_]+|"[a-z][a-z0-9_\s]+")$/i,y=[];i={b:{openTag:function(){return'<span class="xbbcode-b">'},closeTag:function(){return"</span>"}},bbcode:{openTag:function(){return""},closeTag:function(){return""}},center:{openTag:function(){return'<span class="xbbcode-center">'},closeTag:function(){return"</span>"}},code:{openTag:function(){return'<span class="xbbcode-code">'},closeTag:function(){return"</span>"},noParse:!0},color:{openTag:function(e){var t=e.substr(1).toLowerCase()||"black";return h.lastIndex=0,T.lastIndex=0,h.test(t)||(T.test(t)?"#"!==t.substr(0,1)&&(t="#"+t):t="black"),'<span style="color:'+t+'">'},closeTag:function(){return"</span>"}},email:{openTag:function(e,t){var n;return n=e?e.substr(1):t.replace(/<.*?>/g,""),x.lastIndex=0,x.test(n)?'<a href="mailto:'+n+'">':"<a>"},closeTag:function(){return"</a>"}},face:{openTag:function(e){var t=e.substr(1)||"inherit";return m.lastIndex=0,m.test(t)||(t="inherit"),'<span style="font-family:'+t+'">'},closeTag:function(){return"</span>"}},font:{openTag:function(e){var t=e.substr(1)||"inherit";return m.lastIndex=0,m.test(t)||(t="inherit"),'<span style="font-family:'+t+'">'},closeTag:function(){return"</span>"}},i:{openTag:function(){return'<span class="xbbcode-i">'},closeTag:function(){return"</span>"}},img:{openTag:function(e,t){var n=t;return b.lastIndex=0,b.test(n)||(n=""),'<img src="'+n+'" />'},closeTag:function(){return""},displayContent:!1},justify:{openTag:function(){return'<span class="xbbcode-justify">'},closeTag:function(){return"</span>"}},large:{openTag:function(e){var e=e||"",t=e.substr(1)||"inherit";return h.lastIndex=0,T.lastIndex=0,h.test(t)||(T.test(t)?"#"!==t.substr(0,1)&&(t="#"+t):t="inherit"),'<span class="xbbcode-size-36" style="color:'+t+'">'},closeTag:function(){return"</span>"}},left:{openTag:function(){return'<span class="xbbcode-left">'},closeTag:function(){return"</span>"}},li:{openTag:function(){return"<li>"},closeTag:function(){return"</li>"},restrictParentsTo:["list","ul","ol"]},list:{openTag:function(){return"<ul>"},closeTag:function(){return"</ul>"},restrictChildrenTo:["*","li"]},noparse:{openTag:function(){return""},closeTag:function(){return""},noParse:!0},ol:{openTag:function(){return"<ol>"},closeTag:function(){return"</ol>"},restrictChildrenTo:["*","li"]},php:{openTag:function(){return'<span class="xbbcode-code">'},closeTag:function(){return"</span>"},noParse:!0},quote:{openTag:function(){return'<blockquote class="xbbcode-blockquote">'},closeTag:function(){return"</blockquote>"}},right:{openTag:function(){return'<span class="xbbcode-right">'},closeTag:function(){return"</span>"}},s:{openTag:function(){return'<span class="xbbcode-s">'},closeTag:function(){return"</span>"}},size:{openTag:function(e){var t=parseInt(e.substr(1),10)||0;return(4>t||t>40)&&(t=14),'<span class="xbbcode-size-'+t+'">'},closeTag:function(){return"</span>"}},small:{openTag:function(e){var e=e||"",t=e.substr(1)||"inherit";return h.lastIndex=0,T.lastIndex=0,h.test(t)||(T.test(t)?"#"!==t.substr(0,1)&&(t="#"+t):t="inherit"),'<span class="xbbcode-size-10" style="color:'+t+'">'},closeTag:function(){return"</span>"}},sub:{openTag:function(){return"<sub>"},closeTag:function(){return"</sub>"}},sup:{openTag:function(){return"<sup>"},closeTag:function(){return"</sup>"}},table:{openTag:function(){return'<table class="xbbcode-table">'},closeTag:function(){return"</table>"},restrictChildrenTo:["tbody","thead","tfoot","tr"]},tbody:{openTag:function(){return"<tbody>"},closeTag:function(){return"</tbody>"},restrictChildrenTo:["tr"],restrictParentsTo:["table"]},tfoot:{openTag:function(){return"<tfoot>"},closeTag:function(){return"</tfoot>"},restrictChildrenTo:["tr"],restrictParentsTo:["table"]},thead:{openTag:function(){return'<thead class="xbbcode-thead">'},closeTag:function(){return"</thead>"},restrictChildrenTo:["tr"],restrictParentsTo:["table"]},td:{openTag:function(){return'<td class="xbbcode-td">'},closeTag:function(){return"</td>"},restrictParentsTo:["tr"]},th:{openTag:function(){return'<th class="xbbcode-th">'},closeTag:function(){return"</th>"},restrictParentsTo:["tr"]},tr:{openTag:function(){return'<tr class="xbbcode-tr">'},closeTag:function(){return"</tr>"},restrictChildrenTo:["td","th"],restrictParentsTo:["table","tbody","tfoot","thead"]},u:{openTag:function(){return'<span class="xbbcode-u">'},closeTag:function(){return"</span>"}},ul:{openTag:function(){return"<ul>"},closeTag:function(){return"</ul>"},restrictChildrenTo:["*","li"]},url:{openTag:function(e,t){var n;return n=e?e.substr(1):t.replace(/<.*?>/g,""),b.lastIndex=0,b.test(n)||(n="#"),'<a href="'+n+'">'},closeTag:function(){return"</a>"}},"*":{openTag:function(){return"<li>"},closeTag:function(){return"</li>"},restrictParentsTo:["list","ul","ol"]}},e();var k=function(e,t,n,o,a){n=n.toLowerCase();var l=i[n].noParse?r(a):a.replace(c,k),s=i[n].openTag(o,l),u=i[n].closeTag(o,l);return i[n].displayContent===!1&&(l=""),s+l+u};return f.tags=function(){return i},f.addTags=function(t){var n;for(n in t)i[n]=t[n];e()},f.process=function(e){var n={html:"",error:!1},r=[];for(e.text=e.text.replace(/</g,"&lt;"),e.text=e.text.replace(/>/g,"&gt;"),e.text=e.text.replace(p,function(e,t,n){return"<"+n+">"}),e.text=e.text.replace(d,function(e,t,n){return"<"+n+">"}),e.text=e.text.replace(/\[/g,"&#91;"),e.text=e.text.replace(/\]/g,"&#93;"),e.text=e.text.replace(/</g,"["),e.text=e.text.replace(/>/g,"]");e.text!==(e.text=e.text.replace(g,function(e,t,n,r){return r=r.replace(/\[/g,"&#91;"),r=r.replace(/\]/g,"&#93;"),n=n||"",r=r||"","["+t+n+"]"+r+"[/"+t+"]"})););return e.text=a(e.text),e.text=l(e.text),r=t("bbcode",e.text,-1,"","",e.text),n.html=o(e),-1===n.html.indexOf("[")&&-1===n.html.indexOf("]")||r.push("Some tags appear to be misaligned."),e.removeMisalignedTags&&(n.html=n.html.replace(/\[.*?\]/g,"")),e.addInLineBreaks&&(n.html='<div style="white-space:pre-wrap;">'+n.html+"</div>"),e.escapeHtml||(n.html=n.html.replace("&#91;","["),n.html=n.html.replace("&#93;","]")),n.error=0!==r.length,n.errorQueue=r,n},f}();

/* jquery.cssemoticons.min.js */
(function(a){a.fn.emoticonize=function(m){var c=a.extend({},a.fn.emoticonize.defaults,m);var d=[")","(","*","[","]","{","}","|","^","<",">","\\","?","+","=","."];var l=[":-)",":o)",":c)",":^)",":-D",":-(",":-9",";-)",":-P",":-p",":-Þ",":-b",":-O",":-/",":-X",":-#",":'(","B-)","8-)",";*(",":-*",":-\\","?-)",": )",": ]","= ]","= )","8 )",": }",": D","8 D","X D","x D","= D",": (",": [",": {","= (","; )","; ]","; D",": P",": p","= P","= p",": b",": Þ",": O","8 O",": /","= /",": S",": #",": X","B )",": |",": \\","= \\",": *",": &gt;",": &lt;"];var j=[":)",":]","=]","=)","8)",":}",":D",":(",":[",":{","=(",";)",";]",";D",":P",":p","=P","=p",":b",":Þ",":O",":/","=/",":S",":#",":X","B)",":|",":\\","=\\",":*",":&gt;",":&lt;"];var h={"&gt;:)":{cssClass:"red-emoticon small-emoticon spaced-emoticon"},"&gt;;)":{cssClass:"red-emoticon small-emoticon spaced-emoticon"},"&gt;:(":{cssClass:"red-emoticon small-emoticon spaced-emoticon"},"&gt;: )":{cssClass:"red-emoticon small-emoticon"},"&gt;; )":{cssClass:"red-emoticon small-emoticon"},"&gt;: (":{cssClass:"red-emoticon small-emoticon"},";(":{cssClass:"red-emoticon spaced-emoticon"},"&lt;3":{cssClass:"pink-emoticon counter-rotated"},O_O:{cssClass:"no-rotate"},o_o:{cssClass:"no-rotate"},"0_o":{cssClass:"no-rotate"},O_o:{cssClass:"no-rotate"},T_T:{cssClass:"no-rotate"},"^_^":{cssClass:"no-rotate"},"O:)":{cssClass:"small-emoticon spaced-emoticon"},"O: )":{cssClass:"small-emoticon"},"8D":{cssClass:"small-emoticon spaced-emoticon"},XD:{cssClass:"small-emoticon spaced-emoticon"},xD:{cssClass:"small-emoticon spaced-emoticon"},"=D":{cssClass:"small-emoticon spaced-emoticon"},"8O":{cssClass:"small-emoticon spaced-emoticon"},"[+=..]":{cssClass:"no-rotate nintendo-controller"}};var f=new RegExp("(\\"+d.join("|\\")+")","g");var n="(^|[\\s\\0])";for(var g=l.length-1;g>=0;--g){l[g]=l[g].replace(f,"\\$1");l[g]=new RegExp(n+"("+l[g]+")","g")}for(var g=j.length-1;g>=0;--g){j[g]=j[g].replace(f,"\\$1");j[g]=new RegExp(n+"("+j[g]+")","g")}for(var k in h){h[k].regexp=k.replace(f,"\\$1");h[k].regexp=new RegExp(n+"("+h[k].regexp+")","g")}var e="span.css-emoticon";if(c.exclude){e+=","+c.exclude}var b=e.split(",");return this.not(e).each(function(){var o=a(this);var i="css-emoticon";if(c.animate){i+=" un-transformed-emoticon animated-emoticon"}for(var p in h){specialCssClass=i+" "+h[p].cssClass;o.html(o.html().replace(h[p].regexp,"$1<span class='"+specialCssClass+"'>$2</span>"))}a(l).each(function(){o.html(o.html().replace(this,"$1<span class='"+i+"'>$2</span>"))});a(j).each(function(){o.html(o.html().replace(this,"$1<span class='"+i+" spaced-emoticon'>$2</span>"))});a.each(b,function(q,r){o.find(a.trim(r)+" span.css-emoticon").each(function(){a(this).replaceWith(a(this).text())})});if(c.animate){setTimeout(function(){a(".un-transformed-emoticon").removeClass("un-transformed-emoticon")},c.delay)}})};a.fn.unemoticonize=function(b){var c=a.extend({},a.fn.emoticonize.defaults,b);return this.each(function(){var d=a(this);d.find("span.css-emoticon").each(function(){var e=a(this);if(c.animate){e.addClass("un-transformed-emoticon");setTimeout(function(){e.replaceWith(e.text())},c.delay)}else{e.replaceWith(e.text())}})})};a.fn.emoticonize.defaults={animate:true,delay:500,exclude:"pre,code,.no-emoticons"}})(jQuery);

/* J2TeaM_chat.js */
const J2TeaM_CHAT = {
  USER: {
    id: '{$visitor.user_id}',
    name: '{$visitor.username}',
    group: '{$visitor.user_group_id}',
    ip: '{$_SERVER.REMOTE_ADDR}'
  },
  OPTIONS: {
    homepageUrl: '{xen:raw '$xenOptions.boardUrl'}',
    firebaseUrl: '{xen:raw '$xenOptions.j2team_chatbox_firebase_url'}',
    maxMessages: '{xen:raw '$xenOptions.j2team_chatbox_max_messages'}'
  }
};

""!==J2TeaM_CHAT.USER.name&&jQuery(document).ready(function(c){var e=new Firebase(J2TeaM_CHAT.OPTIONS.firebaseUrl+"chat"),h=c("#j2team_chatbox_messages"),f=null;c("#j2team_chatbox_form").submit(function(b){var a=c("#j2team_chatbox_input"),d=a.val();if(d){if(null!==f&&f===d)return;e.push({user:J2TeaM_CHAT.USER,text:d,time:Firebase.ServerValue.TIMESTAMP});a.val("").focus();f=d}b.preventDefault()});var k=parseInt(J2TeaM_CHAT.OPTIONS.maxMessages);e.limitToLast(k).on("child_added",function(b){var a=b.val();
b=a.user.name;var d=XBBCODE.process({text:a.text}),f="["+moment(a.time).format("DD-MM hh:mm A")+"] ",g=c('<li style="display:none">'),a=c('<a href="'+J2TeaM_CHAT.OPTIONS.homepageUrl+"/members/"+a.user.id+'/" target="_blank" class="username" dir="auto"></a>'),e=c('<span class="smallfont time"></span>');a.text(b);e.text(f);g.html(": "+d.html).prepend(a);g.prepend(e);g.emoticonize();h.prepend(g);b=h.find("li");b.first().fadeIn("fast");b.length>k&&b.last().remove()})});]]></template>
    <template title="j2team_chat_main" version_id="0" version_string="1.0.0"><![CDATA[<xen:require css="j2team_chat.css" />
<xen:require js="https://cdn.firebase.com/js/client/2.4.2/firebase.js" />
<xen:require js="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js" />

<ol class="nodeList sectionMain">
  <li class="node category level_1">
    <div class="nodeInfo categoryNodeInfo categoryStrip">
      <div class="categoryText">
        <h3 class="nodeTitle"><a href="https://junookyo.blogspot.com/">{xen:raw '$xenOptions.j2team_chatbox_title'}</a></h3>
      </div>
    </div>
    <div id="j2team_chatbox_wrapper">
      <form method="post" action="javascript:void(0);" id="j2team_chatbox_form">
        <div>
          <input type="text" id="j2team_chatbox_input" placeholder="Tin nhắn..." required>
        </div>
        <div>
          <button type="submit" class="button">Gửi</button>
          <input style="font-weight: bold;" type="button" name="hbold" value="B" class="button" onclick="fcb_upstyle('b');">
          <input style="font-style: italic;" type="button" name="hitalic" value="I" class="button" onclick="fcb_upstyle('i');">
          <select onchange="fcb_upstyle('color');" name="hcolor">
            <option value="">Chọn màu</option>
            <option style="background: Gold;" value="Gold">Gold</option><option style="background: Yellow;" value="Yellow">Yellow</option><option style="background: Khaki;" value="Khaki">Khaki</option><option style="background: Orange;" value="Orange">Orange</option><option style="background: LightYellow;" value="LightYellow">LightYellow</option><option style="background: LightPink;" value="LightPink">LightPink</option><option style="background: Salmon;" value="Salmon">Salmon</option><option style="background: LightSeaGreen;" value="LightSeaGreen">LightSeaGreen</option><option style="background: LawnGreen;" value="LawnGreen">LawnGreen</option><option style="background: Lime;" value="Lime">Lime</option><option style="background: MediumSeaGreen;" value="MediumSeaGreen">MediumSeaGreen</option><option style="background: LightPink;" value="LightPink">LightPink</option><option style="background: DeepPink;" value="DeepPink">DeepPink</option><option style="background: Tomato;" value="Tomato">Tomato</option><option style="background: Orchid;" value="Orchid">Orchid</option><option style="background: Pink;" value="Pink">Pink</option><option style="background: Cyan;" value="Cyan">Cyan</option><option style="background: Magenta;" value="Magenta">Magenta</option><option style="background: aqua;" value="aqua">aqua</option><option style="background: DodgerBlue;" value="DodgerBlue">DodgerBlue</option><option style="background: LightSkyBlue;" value="LightSkyBlue">LightSkyBlue</option><option style="background: LightBlue;" value="LightBlue">LightBlue</option><option style="background: White;" value="White">White</option>
          </select>
          <!-- <input type="button" value="Smile" class="button" onclick="smiliepopup();"> -->
          <!-- <input type="button" value="Lưu trữ" class="button" onclick="archivepage();"> -->
        </div>
      </form>
      <div class="framesb" id="j2team_chatbox_frame">
        <ul id="j2team_chatbox_messages"></ul>
      </div>
    </div>
    <div class="xb_catBottom_center"></div>
  </li>
</ol>
]]></template>
  </templates>
  <public_template_modifications/>
  <bb_code_media_sites/>
  <bb_codes/>
</addon>
